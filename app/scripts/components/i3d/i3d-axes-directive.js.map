{"version":3,"names":[],"mappings":"","sources":["components/i3d/i3d-axes-directive.js"],"sourcesContent":["// * i3d-axes-directive.js\n// * creates three.js component registered with Camera3d and added to scene<br>\n//   pass in params as attrs\n//\n// * @dependencies: Camera3d, Transform3d<br>\n//   @param {services/camera3d-service.js} Camera3d<br>\n//   @param {services/transform3d-service.js} Transform3d<br>\n//   @param {services/log-service.js} Log<br>\n//   @ngInject\n//\n// * NOTE: ngInject is used by ngAnnotate to generate a \n//   minification-safe injection annotation such as:\n//   ```function($scope) => ['$scope', function($scope){}]```\n// * NOTE: $destroy occurs when the angular jQuery wrapper is destroyed.\n//   Thus the wrapper is removed from the DOM but not the 'raw' DOM element\n//   nor, more importantly, the webgl node in the underlying webgl scenegraph\n\n\nangular.module('app').directive(\"i3dAxes\", [\"Camera3d\", \"Transform3d\", \"Log\", function(Camera3d, Transform3d, Log){\n  \"use strict\";\n\n\n  // return DDO\n  return {\n    restrict: 'E',\n    scope: 'true',\n    replace: 'false',\n    templateNamespace: 'svg',\n    link: function(scope, elem, attrs){\n\n\n      // vars\n      var id = attrs.id,\n          p = scope.p || {},\n          pid = p.pid,\n          length = attrs.length || 3000.0,\n          transform = JSON.parse(attrs.transform || '{}'),\n          axes;\n\n\n      // clear and set ```$scope.p.pid = id``` for children<br>\n      scope.p = {};\n      scope.p.pid = id;\n\n      // create axes\n      axes = new THREE.AxisHelper(parseFloat(length));\n\n      // add the Object3d to the scene and store in Camera3d actors by id\n      Camera3d.addActorToScene(id, axes, pid);\n\n      // transform axes - relative to parent in THREE.js scene !!!\n      Transform3d.apply(transform, axes);\n\n\n\n      // cleanup\n      elem.on(\"$destroy\", function() {\n        //Camera3d.removeActorFromScene(id);\n        //scope = null;\n      });\n    }//link-f\n  };//return DDO\n}]);\n"],"file":"components/i3d/i3d-axes-directive.js","sourceRoot":"/source/"}